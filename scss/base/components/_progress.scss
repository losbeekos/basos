/*================================
=            Progress            =
================================*/


/*==========  Bar  ==========*/

progress,
.progress-bar {
    background-color: $progress-bar-bg-color;
    position: relative;
    border: 0;
    width: 100%;
    overflow: hidden;
    color: $progress-bar-value-bg-color;
    border-radius: $base-border-radius;

    @include appearance(none);
    @include rem(height, 20px);
}

progress[value]::-webkit-progress-bar {
    background-color: $progress-bar-bg-color;
}


/*==========  Value  ==========*/

@-webkit-keyframes animate-stripes { 100% { background-position: 100px 0; } }
@-moz-keyframes animate-stripes    { 100% { background-position: 100px 0; } }
@-o-keyframes animate-stripes      { 100% { background-position: 100px 0; } }
@keyframes animate-stripes         { 100% { background-position: 100px 0; } }

@mixin progress-style() {
    background-size: 25px 20px, 100% 100%, 100% 100%;
    border-radius: $base-border-radius;
    border: 0;
    -webkit-animation: animate-stripes 1s linear infinite;
       -moz-animation: animate-stripes 1s linear infinite;
         -o-animation: animate-stripes 1s linear infinite;
            animation: animate-stripes 1s linear infinite;

    @include rem(height, 20px);
    @include single-transition(width, $base-transition-speed);

    @if $btn-gradient {
        @include background-image(linear-gradient(-45deg, transparent, transparent 33%, rgba(0,0,0,0.05) 33%,rgba(0,0,0,0.05) 66%,transparent 66%));
        @include background-image(
            linear-gradient(-45deg, transparent, transparent 33%, rgba(0,0,0,0.05) 33%,rgba(0,0,0,0.05) 66%,transparent 66%),
            linear-gradient(top, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0))
        );
    } @else {
        @include background-image(linear-gradient(-45deg, transparent, transparent 33%, rgba(0,0,0,0.05) 33%,rgba(0,0,0,0.05) 66%,transparent 66%));
    }
}

progress[value] {
    &::-webkit-progress-value { @include progress-style(); background-color: $progress-bar-value-bg-color; }
    &::-moz-progress-bar      { @include progress-style(); background-color: $progress-bar-value-bg-color; }
    &::-ms-fill               { @include progress-style(); background-color: $progress-bar-value-bg-color; }
}

.progress-bar__value                    { @include progress-style(); background-color: $progress-bar-value-bg-color; }


/*==========  Inderterminate progress  ==========*/

@mixin progress-indeterminate() {
    background-color: $progress-bar-bg-color;
}

progress:not([value]) {
    @include progress-style();

    &::-webkit-progress-bar { @include progress-style(); @include progress-indeterminate(); }
    &::-moz-progress-bar    { @include progress-style(); @include progress-indeterminate(); }
    &::-ms-fill             { @include progress-style(); @include progress-indeterminate(); animation-name: none; }
}

.progress-bar__value:not([style]) {
    background-color: $progress-bar-bg-color;
}
